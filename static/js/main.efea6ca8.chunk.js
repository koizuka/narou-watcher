(this["webpackJsonpnarou-react"]=this["webpackJsonpnarou-react"]||[]).push([[0],{57:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(10),a=n.n(o),i=(n(57),n(21)),u=n(16),s=n(45),l=n(90),d=n(80),b=n(91),j=n(81),f=n(92),m=n(82),O=n(83),h=n(93),v=n(85),p=n(84),g=n(15),k=n(34);var x=n(6);function y(t){return t.bookmark>=t.latest?"".concat(t.base_url).concat(t.latest,"/"):"".concat(t.base_url).concat(t.bookmark+1,"/")}function _(t){return t.latest>t.bookmark}function w(t){return Math.max(t.latest-t.bookmark,0)}function S(t){var e=t.ignoreDuration,n=new URLSearchParams(window.location.search).get("server")||"http://localhost:7676";console.log("host",n);var c=Object(r.useState)(!1),o=Object(s.a)(c,2),a=o[0],S=o[1],D=function(t,e){var n=e.ignoreDuration,c=e.enableR18,o=Object(i.b)("".concat(t,"/narou/isnoticelist")),a=o.data,s=o.error,l=Object(i.b)(!s&&c?"".concat(t,"/r18/isnoticelist"):null),d=l.data,b=l.error,j=Object(r.useMemo)((function(){if(void 0!==a){var t=u.DateTime.now().minus(n);return[].concat(Object(k.a)(a.map((function(t){return Object(g.a)(Object(g.a)({},t),{},{isR18:!1})}))),Object(k.a)((d||[]).map((function(t){return Object(g.a)(Object(g.a)({},t),{},{isR18:!0})})))).map((function(t){return Object(g.a)(Object(g.a)({},t),{},{update_time:u.DateTime.fromISO(t.update_time)})})).filter((function(e){return e.update_time>t})).sort((function(t,e){return t.update_time>e.update_time?-1:t.update_time<e.update_time?1:0}))}}),[a,d,n]);return{data:s?void 0:j,error:s||b}}(n,{ignoreDuration:e,enableR18:a}),L=D.data,R=D.error,E=Object(r.useMemo)((function(){return null===L||void 0===L?void 0:L.filter((function(t){return t.bookmark<t.latest}))}),[L]),I=Object(r.useMemo)((function(){return E&&E.length>0?y(E[0]):void 0}),[E]);if(Object(r.useEffect)((function(){document.title="\u306a\u308d\u3046 \u672a\u8aad:".concat(null===E||void 0===E?void 0:E.length)}),[E]),Object(r.useEffect)((function(){if(void 0!==I){var t=function(t){"Enter"===t.key&&window.open(I,"_blank")};return document.addEventListener("keydown",t,!1),function(){document.removeEventListener("keydown",t)}}}),[I]),R)return Object(x.jsxs)("div",{children:["Server(",JSON.stringify(n),") is not working...?"]});if(!L)return Object(x.jsx)("div",{children:"Loading..."});var M=function(t){return!!E&&(E.length>0&&t.base_url===E[0].base_url)};return Object(x.jsxs)(l.a,{m:2,display:"flex",flexDirection:"column",bgcolor:"background.paper",children:[Object(x.jsx)("p",{children:Object(x.jsx)(d.a,{label:"R18\u3092\u542b\u3081\u308b",control:Object(x.jsx)(b.a,{checked:a,onChange:function(t){return S(t.target.checked)}})})}),Object(x.jsx)("p",{children:"\u672a\u8aad: ".concat(null===E||void 0===E?void 0:E.length," \u4f5c\u54c1.")}),null===L||void 0===L?void 0:L.map((function(t){return Object(x.jsx)(l.a,{width:"100%",children:Object(x.jsx)(j.a,{variant:M(t)?"contained":"outlined",href:y(t),target:"_blank",children:Object(x.jsxs)(f.a,{children:[Object(x.jsx)(m.a,{children:Object(x.jsx)(O.a,{color:"primary",badgeContent:w(t),children:Object(x.jsx)(h.a,{children:Object(x.jsx)(p.a,{color:t.isR18?"secondary":void 0})})})}),Object(x.jsx)(v.a,{primary:_(t)?"".concat(t.title," (").concat(t.bookmark,"/").concat(t.latest,")"):"".concat(t.title," (").concat(t.latest,")"),secondary:"".concat(t.update_time.toFormat("yyyy/LL/dd HH:mm")," \u66f4\u65b0  \u4f5c\u8005:").concat(t.author_name)})]})})},t.base_url)}))]})}var D=n(44),L=n(87),R=n(86),E=n(88),I=u.Duration.fromObject({days:30});var M=function(){var t=Object(R.a)("(prefers-color-scheme: dark)"),e=Object(r.useMemo)((function(){return Object(D.a)({palette:{type:t?"dark":"light"}})}),[t]);return Object(x.jsxs)(L.a,{theme:e,children:[Object(x.jsx)(E.a,{}),Object(x.jsx)(i.a,{value:{refreshInterval:3e5,fetcher:function(t){return fetch(t).then((function(t){return t.json()}))}},children:Object(x.jsx)(S,{ignoreDuration:I})}),Object(x.jsxs)("div",{style:{display:"inline-block",position:"fixed",bottom:0,right:0,fontSize:"small",fontStyle:"italic"},children:["narou-react: ",u.DateTime.fromISO("2021-04-07T12:14:20.111Z").toISO()]})]})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),c(t),o(t),a(t)}))};a.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root")),T()}},[[63,1,2]]]);
//# sourceMappingURL=main.efea6ca8.chunk.js.map